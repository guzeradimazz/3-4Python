{% extends 'base.html' %} {% load static %} {% block content %}

<div style="width: 60%; margin: 0 auto">
    <div class="card" style="margin-top: 50px">
        <div class="card-image">
            <figure class="image is-4by3">
                <img src="{{ post.picture.url }}" alt="Placeholder image" />
            </figure>
        </div>
        <div class="card-content">
            <div class="media">
                <div class="media-left">
                    <figure class="image is-48x48">
                        {% if post.user.profile.picture %}
                        <img
                            src="{{ post.user.profile.picture.url }}"
                            alt="Placeholder image"
                        />
                        {% else %}
                        <img
                            src="https://bulma.io/images/placeholders/96x96.png"
                            alt="Placeholder image"
                        />
                        {% endif %}
                    </figure>
                </div>
                <div class="media-content">
                    <p class="title is-4">
                        {% if post.user.profile.first_name %} 
                        {{ post.user.profile.first_name }} 
                        {{ post.user.profile.last_name }} 
                        {% else %} 
                        {{ post.user.username}} {% endif %}
                    </p>
                    <p class="subtitle is-6">
                        <a href="{% url 'profile' post.user%}">
                            @{{ post.user.username }}
                        </a>
                    </p>
                </div>
                <div class="media-right">
                    <div>
                        <a
                            href="{% url 'postlike' post.id %}"
                            style="color: red"
                            ><i
                                class="like material-icons"
                                style="position: absolute; right: 105px"
                                >favorite</i
                            >
                            Likes: {{ post.likes }}</a
                        >
                        <p style="color: red"></p>
                    </div>
                    {% if favorited is True%}
                    <div style="margin-top: 10px">
                        <a
                            href="{% url 'postfavorite' post.id %}"
                            style="color: rgb(125, 236, 103)"
                            ><i
                                class="like material-icons"
                                style="position: absolute; right: 105px"
                                >send</i
                            >
                            Saved</a
                        >
                    </div>
                    {% else %}
                    <div style="margin-top: 10px">
                        <a
                            href="{% url 'postfavorite' post.id %}"
                            style="color: rgb(69, 112, 255)"
                            ><i
                                class="like material-icons"
                                style="position: absolute; right: 105px"
                                >send</i
                            >
                            Save post</a
                        >
                    </div>
                    {% endif %}
                </div>
            </div>

            <div class="content">
                {{ post.caption }} {% for tag in post.tags.all %}
                <a href="{{ tag.get_absolute_url }}">#{{ tag }}</a>
                {% endfor %}
                <br />
                <b><time datetime="2016-1-1">{{ post.posted }}</time></b>
            </div>
        </div>
    </div>
    {% for comment in comments %}
    <article style="margin: 20px" class="media">
        <figure class="media-left">
            <p class="image is-64x64">
                {% if comment.user.profile.picture %}
                <img
                    src="{{ comment.user.profile.picture.url }}"
                    alt="Placeholder image"
                />
                {% else %}
                <img
                    src="https://bulma.io/images/placeholders/96x96.png"
                    alt="Placeholder image"
                />
                {% endif %}
            </p>
        </figure>
        <div class="media-content">
            <div class="content">
                <p>
                    <strong>
                        {% if comment.user.profile.first_name %} 
                        {{ comment.user.profile.first_name }} 
                        {{ comment.user.profile.last_name }} 
                        {% else %} 
                        {{ comment.user.username }}
                        {% endif %}
                    </strong>
                    <br />
                    {{ comment.body }}
                    <br />
                    <small>{{ comment.date }}</small>
                </p>
            </div>
        </div>
    </article>
    {% endfor %}

    <article class="media" style="margin: 20px 0">
        <figure class="media-left">
            <p class="image is-64x64">
                {% if request.user.profile.picture %}
                <img
                    src="{{ request.user.profile.picture.url }}"
                    alt="Placeholder image"
                />
                {% else %}
                <img
                    src="https://bulma.io/images/placeholders/96x96.png"
                    alt="Placeholder image"
                />
                {% endif %}
            </p>
        </figure>
        <div class="media-content">
            <form action="" method="post" role="form">
                {% csrf_token %}
                <div class="field">
                    <p class="control input-custom">
                        {{ form.body }}
                    </p>
                </div>
                <div class="field">
                    <p class="control">
                        <button type="submit" name="action" class="button">Post comment</button>
                    </p>
                </div>
            </form>
        </div>
    </article>
</div>
{% endblock %}
